# pccpuf - pc cpu server with pci-e uarts, fossil root and maybe venti block store.
#	typically used for console servers
dev
	root
	cons
	arch
	pnp		pci
	env
	pipe
	proc
	mnt
	srv
	dup
	rtc
	ssl
	tls
	bridge		log
	cap
	kprof
	fs
	segment

	ether		netif
	ip		arp chandial ip ipv6 ipaux iproute netlog nullmedium pktmedium ptclbsum386

	kbin
#	kbmap

	sd
	uart
	usb
	wd

link
# order of ethernet drivers should match that in ../pcboot/boot so that
# devices are detected in the same order by bootstraps and kernels
# and thus given the same controller numbers.  put fastest first.
# 10 Gb/s
	etherxgbe	pci
# gigabit
	etherigbepci	pci ethermii
	etherigbe	pci
	ether8169	pci ethermii
# 100 Mb/s
	ether82557	pci
	ether8139	pci
	etherelnk3	pci
	ethervt6105m	pci ethermii
# dog slow, mainly for use in virtual machines
	ether2000	ether8390
	ether79c970	pci
	ether8003	ether8390
	ethersink

	ethermedium
	netdevmedium
	loopbackmedium

#	usbuhci
#	usbohci
	usbehci		usbehcipc
# disable goddamn xhci
#	usbxhci		usbxhcipc
	usbxhcipc

# only needed for vga
#	realmode

misc
	mp		apic mpacpi

	uarti8250
	uartpci		pci

	sdata		pci sdscsi
	sdahci		pci sdscsi
	sdnvme		pci sdscsi

ip
	tcp
	udp
#	rudp
	ipifc
	icmp
	icmp6
#	gre
	ipmux
	esp

port
	int cpuserver = 1;

boot cpu boot #S/sdE0/
	tcp
	local

bootdir
	boot$CONF.out boot
	/386/bin/ip/ipconfig
	/386/bin/ramfs
	/386/bin/auth/factotum
# compiling it in allows early keyboard and partfs use
	/386/bin/usb/usbd
	/386/bin/fossil/fossil
	/386/bin/venti/venti
# needed to boot from a usb key and use its fossil
	/386/bin/disk/partfs
